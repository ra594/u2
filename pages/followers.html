<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Followers Only</title>
  <link rel="stylesheet" href="../styles.css">
</head>
<body>
  <header>
    <div class="header-content">
      <div class="logo">Instagram Followers</div>
      <a class="header-link" href="../index.html">Home</a>
      <a class="header-link" href="help.html">Usage</a>
    </div>
  </header>
  <main>
    <h1 id="page-title">Followers Only</h1>
    <div class="list-container" id="list-container">
      <!-- Cards will be dynamically inserted here -->
    </div>
  </main>
  <footer>
    <p>&copy; 2025 DiswayDatway Inc.</p>
  </footer>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const followersOnlyList = JSON.parse(localStorage.getItem('followersOnlyList') || '[]');
      const listContainer = document.getElementById('list-container');
      const titleElem = document.getElementById('page-title');
      
      titleElem.textContent = `Followers Only (${followersOnlyList.length})`;

      if (followersOnlyList.length === 0) {
        const card = document.createElement('div');
        card.className = 'card';
        card.textContent = 'No followers only connections found.';
        listContainer.appendChild(card);
      } else {
        followersOnlyList.forEach(function(username) {
          const card = document.createElement('div');
          card.className = 'card';
          
          // Create username element
          const usernameSpan = document.createElement('span');
          usernameSpan.textContent = username;
          
          // Create inline icons container
          const iconsContainer = document.createElement('span');
          iconsContainer.className = 'card-icons';
          iconsContainer.style.display = 'inline-flex';
          iconsContainer.style.gap = '5px';
          iconsContainer.style.alignItems = 'center';
          
          // Create external link icon (using instagram.svg)
          const externalLink = document.createElement('a');
          externalLink.href = `https://instagram.com/${username}/`;
          externalLink.target = '_blank';
          externalLink.rel = 'noopener noreferrer';
          const externalImg = document.createElement('img');
          externalImg.src = '../assets/instagram.svg';
          externalImg.alt = 'Instagram';
          externalImg.style.maxHeight = '1em';
          externalImg.style.verticalAlign = 'middle';
          externalImg.style.transform = 'translateY(-2px)';
          externalLink.appendChild(externalImg);
          
          // Create info icon
          const infoIcon = document.createElement('span');
          const infoImg = document.createElement('img');
          infoImg.src = '../assets/info.svg';
          infoImg.alt = 'Info';
          infoImg.style.maxHeight = '1em';
          infoImg.style.verticalAlign = 'middle';
          infoImg.style.transform = 'translateY(-2px)';
          infoIcon.appendChild(infoImg);
          
          // Custom tooltip functionality for infoIcon
          infoIcon.addEventListener('mouseenter', function(e) {
            if (infoIcon._hideTimeout) {
              clearTimeout(infoIcon._hideTimeout);
            }
            if (!infoIcon._tooltip) {
              let tooltip = document.createElement('div');
              tooltip.className = 'custom-tooltip';
              tooltip.textContent = 'Timestamps';
              tooltip.style.position = 'absolute';
              tooltip.style.backgroundColor = '#fff';
              tooltip.style.color = '#000';
              tooltip.style.borderRadius = '8px';
              tooltip.style.boxShadow = '0 1px 3px rgba(0,0,0,0.1)';
              tooltip.style.padding = '5px 10px';
              tooltip.style.fontSize = '0.8em';
              tooltip.style.zIndex = '1000';
              const rect = infoIcon.getBoundingClientRect();
              tooltip.style.top = (window.scrollY + rect.bottom + 5) + 'px';
              tooltip.style.left = (window.scrollX + rect.left) + 'px';
              document.body.appendChild(tooltip);
              infoIcon._tooltip = tooltip;
              
              tooltip.addEventListener('mouseenter', function() {
                if (infoIcon._hideTimeout) {
                  clearTimeout(infoIcon._hideTimeout);
                }
              });
              tooltip.addEventListener('mouseleave', function() {
                hideTooltip();
              });
            }
          });
          
          infoIcon.addEventListener('mouseleave', function(e) {
            hideTooltip();
          });
          
          function hideTooltip() {
            infoIcon._hideTimeout = setTimeout(() => {
              const iconHovered = infoIcon.matches(':hover');
              const tooltipHovered = infoIcon._tooltip ? infoIcon._tooltip.matches(':hover') : false;
              if (!iconHovered && !tooltipHovered && infoIcon._tooltip) {
                document.body.removeChild(infoIcon._tooltip);
                infoIcon._tooltip = null;
              }
            }, 200);
          }
          
          // Append external link and info icon to the icons container
          iconsContainer.appendChild(externalLink);
          iconsContainer.appendChild(infoIcon);
          
          // Append username and icons container to the card
          card.appendChild(usernameSpan);
          card.appendChild(document.createTextNode(' '));
          card.appendChild(iconsContainer);
          
          listContainer.appendChild(card);
        });
      }
    });
  </script>
</body>
</html>
